(()=>{var e={};e.id=81,e.ids=[81],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5604:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>O,routeModule:()=>d,serverHooks:()=>l,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{GET:()=>u,POST:()=>c});var o=t(59866),n=t(53027),a=t(84514),i=t(39259);async function c(e,{params:r}){try{let{gameId:t}=await r,s=await e.json();if(!t)return i.NextResponse.json({success:!1,error:{code:"INVALID_GAME_ID",message:"Game ID is required"}},{status:400});if(!s.userId||!s.selectedOptionId||!s.stakeAmount||!s.confidence)return i.NextResponse.json({success:!1,error:{code:"MISSING_REQUIRED_FIELDS",message:"userId, selectedOptionId, stakeAmount, and confidence are required"}},{status:400});let o=Object(function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/infrastructure/repositories/supabase-prediction-game.repository'");throw e.code="MODULE_NOT_FOUND",e}())(),n=Object(function(){var e=Error("Cannot find module '@/shared/events/event-publisher'");throw e.code="MODULE_NOT_FOUND",e}())(),a=Object(function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/domain/services/prediction-economic.service'");throw e.code="MODULE_NOT_FOUND",e}())({publish:async e=>{let r=await n.publish(e);if(!r.success)throw Error(r.error.message)},publishBatch:async e=>{let r=await n.publishBatch(e);if(!r.success)throw Error(r.error.message)}}),c=Object(function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/application/use-cases/participate-prediction.use-case'");throw e.code="MODULE_NOT_FOUND",e}())(o,a),u={userId:s.userId,gameId:t,selectedOptionId:s.selectedOptionId,stakeAmount:s.stakeAmount,confidence:s.confidence,reasoning:s.reasoning},d=await c.execute(u);if(!d.success)return i.NextResponse.json({success:!1,error:{code:"PARTICIPATION_FAILED",message:d.error.message}},{status:400});return i.NextResponse.json({success:!0,data:d.data,metadata:{timestamp:new Date,version:"1.0.0"}},{status:201})}catch(e){return console.error("POST /api/predictions/games/[gameId]/participate error:",e),i.NextResponse.json({success:!1,error:{code:"INTERNAL_SERVER_ERROR",message:"An unexpected error occurred"}},{status:500})}}async function u(e,{params:r}){try{let{gameId:t}=await r,{searchParams:s}=new URL(e.url),o=s.get("userId");if(!t||!o)return i.NextResponse.json({success:!1,error:{code:"MISSING_PARAMETERS",message:"Game ID and User ID are required"}},{status:400});let n=Object(function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/infrastructure/repositories/supabase-prediction-game.repository'");throw e.code="MODULE_NOT_FOUND",e}())(),a=await n.findById(t);if(!a.success||!a.data)return i.NextResponse.json({success:!1,error:{code:"GAME_NOT_FOUND",message:"Prediction game not found"}},{status:404});let c=a.data;return i.NextResponse.json({success:!0,data:{gameId:t,gameStatus:c.status.toString(),canParticipate:c.status.isActive(),requirements:{minimumStake:c.configuration.minimumStake,maximumStake:c.configuration.maximumStake,maxParticipants:c.configuration.maxParticipants}},metadata:{timestamp:new Date,version:"1.0.0"}})}catch(e){return console.error("GET /api/predictions/games/[gameId]/participate error:",e),i.NextResponse.json({success:!1,error:{code:"INTERNAL_SERVER_ERROR",message:"An unexpected error occurred"}},{status:500})}}!function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/application/use-cases/participate-prediction.use-case'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/domain/services/prediction-economic.service'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/infrastructure/repositories/supabase-prediction-game.repository'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/shared/events/event-publisher'");throw e.code="MODULE_NOT_FOUND",e}();let d=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/predictions/games/[gameId]/participate/route",pathname:"/api/predictions/games/[gameId]/participate",filename:"route",bundlePath:"app/api/predictions/games/[gameId]/participate/route"},resolvedPagePath:"C:\\G\\posmul\\apps\\posmul-web\\src\\app\\api\\predictions\\games\\[gameId]\\participate\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:p,workUnitAsyncStorage:m,serverHooks:l}=d;function O(){return(0,a.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:m})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},36232:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72680:()=>{}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[351,796],()=>t(5604));module.exports=s})();