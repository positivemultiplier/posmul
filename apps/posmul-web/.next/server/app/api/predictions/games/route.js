(()=>{var e={};e.id=88,e.ids=[88],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},23423:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>d,serverHooks:()=>l,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>u});var n=r(59866),o=r(53027),i=r(84514),a=r(39259);async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("status")||"ACTIVE",s=parseInt(t.get("limit")||"20"),n=parseInt(t.get("offset")||"0"),o=t.get("category"),i=t.get("sortBy")||"created_at",c=t.get("sortOrder")||"desc",u=Object(function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/infrastructure/repositories/supabase-prediction-game.repository'");throw e.code="MODULE_NOT_FOUND",e}())(),d=Object(function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/application/use-cases/get-prediction-games.use-case'");throw e.code="MODULE_NOT_FOUND",e}())(u),p=await d.execute({filters:{status:r,category:o||void 0},pagination:{limit:s,offset:n},sorting:{field:i,order:c}});if(!p.success)return a.NextResponse.json({success:!1,error:{code:"FETCH_GAMES_FAILED",message:p.error.message}},{status:500});return a.NextResponse.json({success:!0,data:{games:p.data.games,pagination:{total:p.data.total,limit:s,offset:n,hasMore:p.data.total>n+s}},metadata:{timestamp:new Date,version:"1.0.0"}})}catch(e){return console.error("GET /api/predictions/games error:",e),a.NextResponse.json({success:!1,error:{code:"INTERNAL_SERVER_ERROR",message:"An unexpected error occurred"}},{status:500})}}async function u(e){try{let t=await e.json(),r=function(e){let t=[];(!e.title||"string"!=typeof e.title||e.title.length<5)&&t.push("Title must be at least 5 characters long"),(!e.description||"string"!=typeof e.description||e.description.length<20)&&t.push("Description must be at least 20 characters long"),["binary","wdl","ranking"].includes(e.predictionType)||t.push("Invalid prediction type"),(!Array.isArray(e.options)||e.options.length<2)&&t.push("At least 2 options are required"),e.startTime&&e.endTime&&e.settlementTime||t.push("Start time, end time, and settlement time are required");let r=new Date(e.startTime),s=new Date(e.endTime),n=new Date(e.settlementTime);return r>=s&&t.push("End time must be after start time"),s>=n&&t.push("Settlement time must be after end time"),e.createdBy||t.push("Creator ID is required"),["low","medium","high","critical"].includes(e.importance)||t.push("Invalid importance level"),["easy","medium","hard","expert"].includes(e.difficulty)||t.push("Invalid difficulty level"),("number"!=typeof e.minimumStake||e.minimumStake<1)&&t.push("Minimum stake must be at least 1"),("number"!=typeof e.maximumStake||e.maximumStake<=e.minimumStake)&&t.push("Maximum stake must be greater than minimum stake"),{valid:0===t.length,errors:t.length>0?t:void 0}}(t);if(!r.valid)return a.NextResponse.json({success:!1,error:{code:"VALIDATION_ERROR",message:"Invalid request data",details:r.errors}},{status:400});let s=Object(function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/infrastructure/repositories/supabase-prediction-game.repository'");throw e.code="MODULE_NOT_FOUND",e}())(),n=Object(function(){var e=Error("Cannot find module '@/shared/economy-kernel/services/economy-kernel.service'");throw e.code="MODULE_NOT_FOUND",e}()).getInstance(),o=Object(function(){var e=Error("Cannot find module '@/shared/economy-kernel/services/money-wave-calculator.service'");throw e.code="MODULE_NOT_FOUND",e}())(),i=Object(function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/application/use-cases/create-prediction-game.use-case'");throw e.code="MODULE_NOT_FOUND",e}())(s,n,o),c={title:t.title,description:t.description,predictionType:t.predictionType,options:t.options,startTime:new Date(t.startTime),endTime:new Date(t.endTime),settlementTime:new Date(t.settlementTime),createdBy:t.createdBy,importance:t.importance,difficulty:t.difficulty,minimumStake:t.minimumStake,maximumStake:t.maximumStake,maxParticipants:t.maxParticipants},u=await i.execute(c);if(!u.success)return a.NextResponse.json({success:!1,error:{code:"CREATE_GAME_FAILED",message:u.error.message}},{status:500});return a.NextResponse.json({success:!0,data:u.data,metadata:{timestamp:new Date,version:"1.0.0"}},{status:201})}catch(e){return console.error("POST /api/predictions/games error:",e),a.NextResponse.json({success:!1,error:{code:"INTERNAL_SERVER_ERROR",message:"An unexpected error occurred"}},{status:500})}}!function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/application/use-cases/create-prediction-game.use-case'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/application/use-cases/get-prediction-games.use-case'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/bounded-contexts/prediction/infrastructure/repositories/supabase-prediction-game.repository'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/shared/economy-kernel/services/economy-kernel.service'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/shared/economy-kernel/services/money-wave-calculator.service'");throw e.code="MODULE_NOT_FOUND",e}();let d=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/predictions/games/route",pathname:"/api/predictions/games",filename:"route",bundlePath:"app/api/predictions/games/route"},resolvedPagePath:"C:\\G\\posmul\\apps\\posmul-web\\src\\app\\api\\predictions\\games\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:p,workUnitAsyncStorage:m,serverHooks:l}=d;function g(){return(0,i.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:m})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},36232:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72680:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[351,796],()=>r(23423));module.exports=s})();