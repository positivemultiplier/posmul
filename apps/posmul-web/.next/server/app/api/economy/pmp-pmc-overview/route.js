(()=>{var e={};e.id=969,e.ids=[969],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},36232:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72680:()=>{},86863:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>v,routeModule:()=>u,serverHooks:()=>d,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>p});var o={};t.r(o),t.d(o,{GET:()=>i});var a=t(59866),n=t(53027),s=t(84514),c=t(39259);async function i(e){try{var r,t,o;let{searchParams:a}=new URL(e.url),n=a.get("userId");if(!n)return c.NextResponse.json({success:!1,error:{code:"MISSING_USER_ID",message:"User ID is required"}},{status:400});let s=Object(function(){var e=Error("Cannot find module '@/shared/economy-kernel/services/economy-kernel.service'");throw e.code="MODULE_NOT_FOUND",e}()).getInstance(),i=Object(function(){var e=Error("Cannot find module '@/shared/economy-kernel/services/money-wave-calculator.service'");throw e.code="MODULE_NOT_FOUND",e}())(),[u,m]=await Promise.all([s.getPmpBalance(n),s.getPmcBalance(n)]);if(!u.success||!m.success)return c.NextResponse.json({success:!1,error:{code:"BALANCE_FETCH_FAILED",message:"Failed to fetch user balance"}},{status:500});let p=u.data,d=m.data,v={totalPmpInCirculation:1e6,totalPmcInCirculation:5e5,activeUsers:100,dailyTransactionVolume:1e4},y=await i.calculateDailyPrizePool(),w=y.success?y.data:null,P=await l(n,s);return c.NextResponse.json({success:!0,data:{userEconomy:{pmpBalance:p,pmcBalance:d,totalValue:p+d,stats:P},systemEconomy:{totalPmpInCirculation:v.totalPmpInCirculation,totalPmcInCirculation:v.totalPmcInCirculation,activeUsers:v.activeUsers,dailyTransactionVolume:v.dailyTransactionVolume},moneyWave:{currentWave:1,dailyPrizePool:w?.totalDailyPool||0,nextDistribution:new Date(Date.now()+864e5),waveEfficiency:.85},marketIndicators:{pmpDemand:(r=v).totalPmpInCirculation?Math.min(100*(r.dailyTransactionVolume/r.totalPmpInCirculation),100):0,pmcVolatility:(t=v,25*!!t.totalPmcInCirculation),economicHealth:(o=v,[25*(o.activeUsers>0),25*(o.totalPmpInCirculation>0),25*(o.totalPmcInCirculation>0),25*(o.dailyTransactionVolume>0)].reduce((e,r)=>e+r,0))}},metadata:{timestamp:new Date,version:"1.0.0",refreshInterval:300}})}catch(e){return console.error("GET /api/economy/pmp-pmc-overview error:",e),c.NextResponse.json({success:!1,error:{code:"INTERNAL_SERVER_ERROR",message:"An unexpected error occurred"}},{status:500})}}async function l(e,r){try{return{weeklyPmpEarned:0,weeklyPmcEarned:0,totalTransactions:0,averageTransactionSize:0,riskScore:.5}}catch(e){return console.error("Error calculating user economic stats:",e),{weeklyPmpEarned:0,weeklyPmcEarned:0,totalTransactions:0,averageTransactionSize:0,riskScore:.5}}}!function(){var e=Error("Cannot find module '@/shared/economy-kernel/services/economy-kernel.service'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/shared/economy-kernel/services/money-wave-calculator.service'");throw e.code="MODULE_NOT_FOUND",e}();let u=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/economy/pmp-pmc-overview/route",pathname:"/api/economy/pmp-pmc-overview",filename:"route",bundlePath:"app/api/economy/pmp-pmc-overview/route"},resolvedPagePath:"C:\\G\\posmul\\apps\\posmul-web\\src\\app\\api\\economy\\pmp-pmc-overview\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:m,workUnitAsyncStorage:p,serverHooks:d}=u;function v(){return(0,s.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:p})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[351,796],()=>t(86863));module.exports=o})();