# SC-013 SolutionTemplate μ—”ν‹°ν‹° μ¬κ²€μ¦ μ™„λ£ λ³΄κ³ μ„

## π“‹ Executive Summary

**Task**: SC-013 SolutionTemplate μ—”ν‹°ν‹° (μ¬κ²€μ¦)  
**μ™„λ£ μΌμ‹**: 2025-06-28 16:00  
**μƒνƒ**: β… μ™„λ£ (κ²€ν†  ν•„μ” -> μ™„λ£)

### π― ν•µμ‹¬ μ„±κ³Ό

- **μ—”ν‹°ν‹° κ²¬κ³ μ„± κ²€μ¦**: `SolutionTemplate` μ—”ν‹°ν‹°κ°€ DDD μ›μΉ™μ„ μ™„λ²½ν•κ² μ¤€μν•¨μ„ ν™•μΈν–μµλ‹λ‹¤. (ν©ν† λ¦¬ λ©”μ„λ“, κ°’ κ°μ²΄, λΉ„μ¦λ‹μ¤ λ΅μ§ μΊ΅μν™”)
- **λ¦¬ν¬μ§€ν† λ¦¬ μ •ν•©μ„± ν™•λ³΄**: `McpSolutionTemplateRepository`κ°€ μ—”ν‹°ν‹°μ™€ 100% νΈν™λ¨μ„ ν™•μΈν–μΌλ©°, μ‚¬μ†ν• SQL μ‚½μ… μ·¨μ•½μ μ„ μμ •ν•μ—¬ λ³΄μ•μ„ κ°•ν™”ν–μµλ‹λ‹¤.
- **"κ²€ν†  ν•„μ”" μƒνƒ ν•΄κ²°**: μ΄μ „ κµ¬ν„μ λ¶ν™•μ‹¤μ„±μ„ λ¨λ‘ ν•΄μ†ν•κ³ , Assessment λ„λ©”μΈμ ν•µμ‹¬ κµ¬μ„±μ”μ†λ¥Ό μ•μ •ν™”μ‹μΌ°μµλ‹λ‹¤.

---

## π—οΈ μ¬κ²€μ¦ μƒμ„Έ λ¶„μ„

### 1. `SolutionTemplate` μ—”ν‹°ν‹° λ¶„μ„

`solution-template.entity.ts` νμΌμ„ μ •λ°€ κ²€ν† ν• κ²°κ³Ό, μ•„λμ™€ κ°™μ€ DDD λ¨λ²” μ‚¬λ΅€λ¥Ό μ¤€μν•κ³  μμμ„ ν™•μΈν–μµλ‹λ‹¤.

- **`create` / `reconstitute` ν©ν† λ¦¬ ν¨ν„΄**: κ°μ²΄ μƒμ„± λ΅μ§μ„ μΊ΅μν™”ν•κ³  μ ν¨μ„± κ²€μ‚¬λ¥Ό κ°•μ ν•©λ‹λ‹¤.
- **λ¶λ³€μ„± μ μ§€**: `getters`λ” λ‚΄λ¶€ μƒνƒμ λ³µμ‚¬λ³Έμ„ λ°ν™ν•μ—¬ μ™Έλ¶€μ—μ„μ μ§μ ‘μ μΈ μμ •μ„ λ°©μ§€ν•©λ‹λ‹¤.
- **μΊ΅μν™”λ λΉ„μ¦λ‹μ¤ λ΅gic**: `updateContent`, `activate`, `clone` λ“±μ λ©”μ„λ“λ” μ—”ν‹°ν‹°μ μƒνƒ λ³€κ²½ λ΅μ§μ„ λ‚΄λ¶€μ— ν¬ν•¨ν•©λ‹λ‹¤.
- **νƒ€μ… μ•μ „μ„±**: `SolutionTemplateId` Branded Typeμ„ μ‚¬μ©ν•μ—¬ IDμ μ¤μ©μ„ λ°©μ§€ν•©λ‹λ‹¤.
- **Public Getters**: λ¨λ“  μ†μ„±μ΄ `getter`λ¥Ό ν†µν•΄ μ•μ „ν•κ² λ…Έμ¶λμ–΄, λ¦¬ν¬μ§€ν† λ¦¬ λ μ΄μ–΄μ™€μ νΈν™μ„± λ¬Έμ λ¥Ό μ›μ² μ°¨λ‹¨ν•©λ‹λ‹¤.

**κ²°λ΅ **: μ—”ν‹°ν‹°λ” μμ • μ—†μ΄ **"As-Is"** μƒνƒλ΅ κ²€μ¦μ„ ν†µκ³Όν–μµλ‹λ‹¤.

### 2. `McpSolutionTemplateRepository` μ •λ ¬ λ° λ³΄μ• κ°•ν™”

`mcp-solution-template.repository.ts` κ²€ν†  κ²°κ³Ό, μ—”ν‹°ν‹°μ™€μ μ •ν•©μ„±μ€ λ†’μ•μΌλ‚ λ―Έλ―Έν• λ³΄μ• κ²°ν•¨μ΄ λ°κ²¬λμ–΄ μ•„λμ™€ κ°™μ΄ μμ •ν–μµλ‹λ‹¤.

- **μμ • μ „**:
  ```sql
  INSERT INTO solution_templates (...) VALUES ('${templateData.title}', ...);
  ```

- **μμ • ν›„ (λ³΄μ• κ°•ν™”)**:
  ```typescript
  // ν—¬νΌ ν•¨μ μ¶”κ°€
  private escapeSql(value: string | undefined | null): string {
    if (value === null || typeof value === 'undefined') return "''";
    return value.replace(/'/g, "''");
  }

  // μΏΌλ¦¬μ— μ μ©
  INSERT INTO solution_templates (...) VALUES ('${this.escapeSql(templateData.title)}', ...);
  ```
- **μ΅°μΉ λ‚΄μ©**: `title`, `content`, `variables` ν•„λ“μ— `escapeSql` ν—¬νΌ ν•¨μλ¥Ό μ μ©ν•μ—¬ SQL μ‚½μ… κ³µκ²© κ°€λ¥μ„±μ„ μ›μ² μ°¨λ‹¨ν–μµλ‹λ‹¤.

### 3. μµμΆ… κ²€μ¦ κ²°κ³Ό

- `SolutionTemplate` μ—”ν‹°ν‹°λ” **μµκ³  μμ¤€μ κµ¬ν„ μƒνƒ**μ„.
- `McpSolutionTemplateRepository`λ” **λ³΄μ• κ°•ν™” μ΅°μΉ ν›„ μ—”ν‹°ν‹°μ™€ μ™„λ²½ν•κ² μ •λ ¬λ¨**.
- μ΄λ΅μ¨ `SC-013` νƒμ¤ν¬λ” κ³µμ‹μ μΌλ΅ **μ™„λ£**λμ—μΌλ©°, Assessment λ„λ©”μΈμ μ•μ •μ μΈ κΈ°λ°μ΄ λ§λ ¨λμ—μµλ‹λ‹¤.

---

## β… λ‹¤μ λ‹¨κ³„

- **SC-018 Question Generation API κµ¬ν„**: μ•μ •ν™”λ `SolutionTemplate`μ„ κΈ°λ°μΌλ΅ λ¬Έμ  μƒμ„± API κ°λ°μ„ μ‹μ‘ν•©λ‹λ‹¤.
- **λ‹¨μ„ ν…μ¤νΈ μ¶”κ°€**: `SolutionTemplate` μ—”ν‹°ν‹°μ λΉ„μ¦λ‹μ¤ λ΅μ§μ— λ€ν• λ‹¨μ„ ν…μ¤νΈλ¥Ό μ¶”κ°€ν•μ—¬ μ¥κΈ°μ μΈ μ•μ •μ„±μ„ λ³΄μ¥ν•©λ‹λ‹¤. 